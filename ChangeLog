2001-09-07  Martin Baulig  <baulig@suse.de>

	* samples/bonoboui-hello/helloapp.c: Don't #include <libgnome.h>.
	* samples/bonoboui-hello/main.c: ditto.
	* tests/test-selector.c: ditto.

2001-09-07  Martin Baulig  <baulig@suse.de>

	* bonobo/bonobo-ui-component.c
	(ui_event, impl_Bonobo_UIComponent_execVerb): Reflect latest
	bonobo_closure_invoke() API changes.

2001-09-07  Martin Baulig  <baulig@suse.de>

	* bonobo/bonobo-canvas-component.c: Use the bonobo-ui-marshal.[ch]
	marshalling functions.
	* bonobo/bonobo-control-frame.c: ditto.
	* bonobo/bonobo-ui-engine.c: ditto.
	* bonobo/bonobo-ui-xml.c: ditto.

	* bonobo/bonobo-ui-marshal.list: Added `VOID:STRING,BOOLEAN',
	`BOOLEAN:POINTER', `VOID:POINTER,STRING', `VOID:POINTER,POINTER'.

2001-09-07 Glynn Foster <glynn.foster@sun.com>
	
	* Makefile.am: Change includedir to gnome-2.0/ instead of gnome/2/

2001-09-03  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-ui-component.c (bonobo_ui_component_set_status): 
	do escaping on set string.

	* bonobo/bonobo-ui-node.c (append_escaped_text): cpy from glib.
	(internal_to_string): do entity encoding for basic entities.

	* tests/test-ui.c (main): upd. regression tests.

2001-09-06  Anders Carlsson  <andersca@gnu.org>

	* bonobo/Makefile.am (libbonoboincludedir): Change includedir
	to gnome-2.0/ instead of gnome/2/

	* bonobo/libbonoboui-2.0.pc.in (Cflags): Likewise.

Sun Sep 02 23:32:07 2001  George Lebl <jirka@5z.com>

	* bonobo/bonobo-ui-main.c (bonobo_ui_init_full):
	  libgnome_module_info is now libgnome_module_info_get ()

Sun Sep 02 00:50:00 2001  George Lebl <jirka@5z.com>

	* bonobo/bonobo-file-selector-util.c (create_control):
	  gnome_program_get_name is now called gnome_program_get_app_id
	  so use that.

2001-08-31  Abel Cheung  <maddog@linux.org.hk>

	* configure.in (ALL_LINGUAS): zh_TW.Big5 -> zh_TW

2001-08-24  jacob berkman  <jacob@ximian.com>

	* tests/test-filesel.c: test for bonobo-file-selector

	* bonobo/bonobo-file-selector-util.[ch]: import libgnomefilesel

2001-08-22  Michael Meeks  <michael@ximian.com>

	* tests/test-ui.c (main): do a batch of 1000 sets for profiling.

	* bonobo/bonobo-ui-node.c (uiCharacters): use g_string_append_len

2001-08-22  Michael Meeks  <michael@ximian.com>

	* bonobo/*: convert to GQuark more fully, use static
	initializers.

	* bonobo/bonobo-ui-node.c (cleanhash): prune if & clean
	prototype ( from Darin ).
	(bonobo_ui_node_get_attr): simplify to use dup
	without conditional.
	(bonobo_ui_node_get_content): ditto.
	(bonobo_ui_node_copy_attrs): ditto.

	* Merged to 2001-08-22 from bonobo: ui-shrink branch.

2001-08-22  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-ui-component.c
	(bonobo_ui_component_set_status): update path - since tree
	no longer has empty child content nodes.

2001-08-21  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-ui-engine.c (state_update_new):
	efficiency wins.
	(hide_placeholder_if_empty_or_hidden): ditto.

	* bonobo/bonobo-ui-xml.c (do_insert): optimize.
	(merge): more efficiency tweaking.

	* bonobo/bonobo-ui-engine.c (move_dirt_cmd_to_widget): 
	accelerate loop, use name_id
	(update_commands_state): ditto.

	* bonobo/bonobo-ui-xml.c (bonobo_ui_xml_set_dirty, merge):
	quick compares for placeholder.
	(find_child, merge): accelerate name lookups.

	* tests/test-ui.c (main): update status check.

	* bonobo/bonobo-ui-node.c (uiEndElement): fix
	empty content pruning bug.
	(bonobo_ui_node_replace): swap arg. order; it was wrong.

	* bonobo/bonobo-ui-util.c
	(bonobo_ui_util_translate_ui): encode strings for
	libxml transport issues.

	* bonobo/bonobo-ui-node.c
	(bonobo_ui_node_move_children): impl.

	* bonobo/bonobo-ui-xml.c (override_node_with),
	(reinstate_old_node): use it.
	(move_children): kill it - slow.

	* bonobo/bonobo-ui-engine.c (class_init): setup
	cached ids for "id", "verb", "name"
	(node_get_id): fix horrible inefficiencies.
	(cmd_to_node_add_node): upd.
	(cmd_to_node_remove_node): upd.
	(impl_emit_verb_on): upd.
	(cmd_get_node): upd.
	(impl_emit_event_on): upd.
	(bonobo_ui_engine_get_cmd_node): upd.

	* bonobo/bonobo-ui-xml.c
	(bonobo_ui_xml_class_init): setup name_id.
	(do_set_id): use it.
	(bonobo_ui_xml_make_path): ditto & optimize.

2001-08-21  Michael Meeks  <michael@ximian.com>

	* Merged libbonoboui to here:

	* bonobo/bonobo-ui-xml.c (bonobo_ui_xml_dump),
	(override_node_with): port to new code.
	(bonobo_ui_xml_merge): ditto.

	* bonobo/bonobo-ui-util.c (bonobo_ui_util_translate_ui):
	re-implement for new node structures.

	* bonobo/bonobo-ui-node.c
	(bonobo_ui_node_from_string, bonobo_ui_node_from_file): reimpl.
	(parse_state_new, parse_state_free): impl.
	(bonobo_ui_node_str_from_id): impl.
	(internal_to_string): impl.
	(bonobo_ui_node_to_string): re-impl.

2001-08-20  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-ui-node.c (bonobo_ui_node_new),
	(bonobo_ui_node_new_child, bonobo_ui_node_copy): rewrite.
	(node_free_internal): impl.
	(bonobo_ui_node_free, bonobo_ui_node_set_data),
	(bonobo_ui_node_get_data): rewrite.
	(bonobo_ui_node_get_id, cleanhash): impl.
	(bonobo_ui_node_set_attr_by_id): impl.
	(bonobo_ui_node_set_attr): upd.
	(bonobo_ui_node_remove_attr): upd.
	(bonobo_ui_node_unlink, bonobo_ui_node_insert_before),
	(bonobo_ui_node_add_child, bonobo_ui_node_set_content),
	(bonobo_ui_node_replace): rewrite.
	(bonobo_ui_node_peek_content): impl
	(bonobo_ui_node_next): re-impl.
	(bonobo_ui_node_prev, bonobo_ui_node_children),
	(bonobo_ui_node_get_name, bonobo_ui_node_parent): rewrite.
	(bonobo_ui_node_has_name): reimpl.
	(bonobo_ui_node_has_name_by_id): impl.
	(bonobo_ui_node_transparent): reimpl.
	(bonobo_ui_node_copy_attrs): reimpl.
	(node_free_attrs): impl.
	(do_strip): kill.
	(bonobo_ui_node_strip): make a noop.

	* bonobo/bonobo-ui-node-private.h: add.

2001-08-22  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-ui-util.c (free_loaded_node_cache),
	(free_node_cache_entry, bonobo_ui_util_set_ui):
	(node_hash, node_equal): port Alex' cache code from
	bonobo stable.
	(bonobo_ui_util_new_ui): remove 'strip'

2001-08-22  Anders Carlsson  <andersca@gnu.org>

	* bonobo/bonobo-ui-component.c (impl_xml_get): Free our
	ev.

2001-08-20  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-ui-node.c (bonobo_ui_node_from_file):
	update to unlink root node as well, and strip earlier.

2001-08-20  Michael Meeks  <michael@ximian.com>

	* tests/test-ui.c (main): Make the 'Insensitive' item
	insensitive - woah !

	* bonobo/bonobo-ui-container.c
	(impl_Bonobo_UIContainer_setNode): silently accept
	xml being empty without doing anything.

	* bonobo/bonobo-ui-component.c (impl_xml_set): return
	if xml is empty.

	* bonobo/bonobo-ui-node.c
	(bonobo_ui_node_from_string): unlink the root node
	from the doc.

2001-08-18  Darin Adler  <darin@bentspoon.com>

	* configure.in: Add GLIB_GENMARSHAL.
	
	* bonobo/Makefile.am: Build marshal files in a simpler way.
	
	* bonobo/.cvsignore:
	* bonobo/bonoboui-marshal-main.c:
	* bonobo/bonoboui-marshal.list:
	* bonobo/bonobo-ui-component.c:
	* bonobo/bonobo-ui-marshal-main.c:
	* bonobo/bonobo-ui-marshal.list:
	Changed name of marshal files.
	
	* samples/bonoboui-hello/Makefile.am:
	* samples/controls/Makefile.am:
	* tests/Makefile.am:
	Removed extra -I directives.

2001-08-17  Cody Russell  <bratsche@gnome.org>

	* bonobo/bonobo-zoomable.c: bonobo_zoomable_new() should be
	using g_object_new(), not gtk_type_new().

2001-08-16  Fatih Demir <kabalak@gtranslator.org>

	* configure.in: Added "tr" to the languages list.

2001-08-14  Michael Meeks  <michael@ximian.com>

	* configure.in: depend on bonobo-activation >= 0.9.1

	* samples/controls/Makefile.am (serverdir): s/oaf/server/
	update directory to install to.

2001-08-14  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-control-frame.c (get_toplevel_fn):
	fixup allocator mixup.

	* tests/test-focus.c (main): upd.
	(clicked_fn): add to kill transient thing.

2001-08-13  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-canvas-component.h: add missing includes.

	* bonobo/bonobo-canvas-component.c: squash warning.

	* bonobo/bonobo-ui-engine.c
	(bonobo_ui_engine_exec_verb): stub.
	(bonobo_ui_engine_ui_event): stub.

	* configure.in: depend on libbonobo >= 1.101.2

	* bonobo/bonobo-ui-container.c
	(bonobo_ui_container_class_init): upd.
	(impl_Bonobo_UIContainer_execVerb),
	(Bonobo_UIContainer_uiEvent): impl.

2001-08-09  Peter Williams  <peterw@ximian.com>

	* Makefile.am (EXTRA_DIST): Typo fix.

2001-08-08  Michael Meeks  <michael@ximian.com>

	* configure.in: build samples/controls.
	add xml-i18n-tools.

	* samples/controls/Makefile.am: fixup.

2001-08-07  Michael Meeks  <michael@ximian.com>

	* configure.in: use PKG_CHECK_MODULES, depend on
	libbonobo >= 1.101.1

	* bonobo/bonobo-control.c (bonobo_control_set_transient_for),
	(bonobo_control_unset_transient_for): impl.
	(window_transient_realize_gdk_cb): impl.
	(window_transient_unrealize_gdk_cb): 
	(window_set_transient_for_gdk): impl.

	* bonobo/bonobo-control-frame.c: Sort out transient issues.
	(impl_Bonobo_ControlFrame_getAmbientProperties): 
	demand create the ambient property bag.
	(get_toplevel_fn): impl.
	(add_toplevel_prop): impl.
	(bonobo_control_frame_set_propbag): upd.
	(check_ambient_propbag): impl.
	(bonobo_control_frame_destroy): impl to remove property to kill race.
	(bonobo_control_frame_class_init): hook it up.

2001-08-07  Michael Meeks  <michael@ximian.com>

	* bonobo/Makefile.am: don't distribute marshal-sources.

2001-08-06  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-control.c
	(bonobo_control_window_id_from_x11): fix to return
	correctlty CORBA allocated type.

	* bonobo/bonobo-control-frame.c
	(bonobo_control_frame_set_remote_window): upd.

2001-08-08  Darin Adler  <darin@bentspoon.com>

	* README: Help people find the information about using
	and hacking on this library, which is, for the moment,
	in another package.

2001-08-08  Cody Russell  <bratsche@gnome.org>

	* bonobo/*.[ch]: Ensure that all get_type () functions are
	declared as G_GNUC_CONST and that their return values are
	either GType or GtkType, not guint.

2001-08-07  Darin Adler  <darin@bentspoon.com>

	* Makefile.am:
	* configure.in:
	No need to build intl directory given how we use gettext.

2001-08-07  Martin Baulig  <baulig@suse.de>

	* configure.in: Fix the PKG_CHECK_MODULES checks.
	You need to check for all dependencies for any given target in a
	single PKG_CHECK_MODULES command, otherwise you'll get duplicate
	-ldl etc. into your *.la files.

	* */Makefile.am: Use the correct _CFLAGS and _LIBS.

2001-08-06  Darin Adler  <darin@bentspoon.com>

	* configure.in: Use PKG_CHECK_MODULES instead of
	GNOME_PKGCONFIG_CHECK_MODULES.

2001-08-06  Martin Baulig  <baulig@suse.de>

	* bonobo/bonobo-ui-main.c: #include <libgnome/gnome-init.h>,
	not <libgnome/libgnome-init.h>.

	* samples/compound-doc/container/container.c: Ditto.

2001-08-05  Michael Meeks  <michael@ximian.com>

	* Makefile.am: add changes.txt

2001-08-01  Darin Adler  <darin@bentspoon.com>

	* samples/bonoboui-hello/main.c:
	* tests/test-selector.c:
	Update <libgnome/libgnome.h> to <libgnome.h>.

2001-08-01  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-selector-widget.c: update for bonobo-activation.

2001-08-01  ERDI Gergo  <cactus@cactus.rulez.org>

	* changes.txt: Added note about new opt_ev's

	* bonobo/bonobo-control.h: Add opt_ev's around the place

	* bonobo/bonobo-control-frame.h: ditto

2001-08-01  Michael Meeks  <michael@ximian.com>

	* samples/controls/sample-control-container.c (main): upd.

2001-07-31  Abel Cheung  <maddog@linux.org.hk>

	* configure.in: Added zh_TW.Big5 to ALL_LINGUAS.

2001-07-31  Michael Meeks  <michael@ximian.com>

	* tests/test-ui.c, 
	* tests/test-sensitivity.c, 
	* tests/test-moniker.c, 
	* tests/test-focus.c, 
	* tests/test-container.c, 
	* bonobo/bonobo-window.c, 
	* bonobo/bonobo-ui-main.c, 
	* bonobo/bonobo-ui-container.c, 
	* samples/controls/sample-control-factory.c, 
	* samples/controls/sample-control-container.c: remove 
	redundant liboaf.h includes.

2001-07-30  ERDI Gergo  <cactus@cactus.rulez.org>

	* bonobo/Makefile.am: Create our own marshallers instead of
	relying on libbonobo

	* bonobo/bonobo-ui-component.c: Use these marshallers

2001-07-30  Mikael Hallendal  <micke@codefactory.se>

	* tests/test-selector.c: include libgnome/libgnome.h instead

2001-07-31  Michael Meeks  <michael@ximian.com>

	* tests/test-ui.c (main): fixup set_containers.

2001-07-31  Jamil Geor <geor@ihug.co.nz>

	* bonobo/bonobo-ui-component.c (bonobo_ui_component_unset_container),
	(bonobo_ui_component_set_container): add opt_ev.

	* bonobo/bonobo-control.c (bonobo_control_finalize), 
	(bonobo_control_auto_merge): upd.

2001-07-30  Michael Meeks  <michael@ximian.com>

	* samples/bonoboui-hello/helloapp.c: kill libgnomeui includes.

	* tests/test-moniker.c (display_as_stream): show helpful exceptions.

2001-07-30  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-ui-component.c (bonobo_ui_component_add_verb): upd.
	(bonobo_ui_component_add_verb_full): gclosureize.
	(bonobo_ui_component_add_listener): upd.
	(bonobo_ui_component_add_listener_full): gclosureize.
	(listener_destroy, verb_destroy): ditto.
	(ui_event): upd invoke.
	(marshal_VOID__USER_DATA_STRING): impl manualy to do some leve of
	nasty backwards compat with the Gnome::UIInfo stuff.
	(remove_verb): update.
	(bonobo_ui_component_remove_verb_by_closure): impl.
	(bonobo_ui_component_remove_verb_by_func): remove
	(bonobo_ui_component_remove_verb_by_data): remove.
	(remove_listener): upd.
	(bonobo_ui_component_remove_listener_by_closure): impl.
	(bonobo_ui_component_remove_listener_by_data): kill.
	(bonobo_ui_component_remove_listener_by_func): kill.

2001-07-29  Maciej Stachowiak  <mjs@noisehavoc.org>

	* samples/bonoboui-hello/helloapp.h: Include
	<bonobo/bonobo-window.h> instead of <bonobo/bonobo-win.h> to fix
	build.

2001-07-29  Murray Cumming  <murrayc@usa.net>

	* samples/bonoboui-hello/helloapp.c: Corrected the
	  'can't find xml' warning.

2001-07-28  Murray Cumming  <murrayc@usa.net>

	* samples/bonoboui-hello: Added this example, which is
	  meant to be a more sane and understandable bonoboui
	  example than tests/test-ui.
	
2001-07-28  Murray Cumming  <murrayc@usa.net>

	* tests/test-ui.c: Corrected the 'can't find std-ui.xml'
	  warning - ~/.gnome/ui is no longer used.

2001-07-28  Michael Meeks  <michael@ximian.com>

	* tests/Makefile.am: install test-moniker.

	* tests/test-moniker.c: add POPT_AUTOHELP

2001-07-27  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-control.c (window_id_demangle): rename to
	(bonobo_control_x11_from_window_id): this, and publicise.
	(bonobo_control_windowid_from_x11): rename to
	(bonobo_control_window_id_from_x11): this & add compat macro.

	* bonobo/bonobo-control-frame.c (bonobo_control_frame_set_remote_window): upd.

2001-07-24  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-ui-main.c (bonobo_ui_init_full): init. bonobo
	inside here - of course :-)

2001-07-23  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-ui-component.c (impl_set_prop): re-write to use
	setAttr.
	(impl_get_prop): upd. for getAttr.

	* bonobo/bonobo-ui-container.c (impl_Bonobo_UIContainer_getAttr),
	(impl_Bonobo_UIContainer_setAttr): impl.
	(bonobo_ui_container_class_init): hook em up.

	* bonobo/bonobo-ui-engine.c (bonobo_ui_engine_xml_set_prop):
	forward port from Alex's bonobo 1.0 UI work
	(bonobo_ui_engine_xml_get_prop): ditto.

2001-07-23  Martin Baulig  <baulig@suse.de>

	* bonobo/bonobo-ui-engine-config.[ch]: Ported to GObject.

	* bonobo/bonobo-ui-sync.[ch]: Ported to GObject.
	* bonobo/bonobo-ui-sync-keys.[ch]: Ported to GObject.
	* bonobo/bonobo-ui-sync-menus.[ch]: Ported to GObject.
	* bonobo/bonobo-ui-sync-toolbar.[ch]: Ported to GObject.
	* bonobo/bonobo-ui-sync-status.[ch]: Ported to GObject.

2001-07-23  Martin Baulig  <baulig@suse.de>

	* bonobo/bonobo-widget.c (bonobo_widget_construct_control):
	`bw->priv->server' is already a CORBA_Object, don't call
	BONOBO_OBJREF on it.

2001-07-23  Martin Baulig  <baulig@suse.de>

	* bonobo/bonobo-ui-engine.c (BonoboUIEngineClass): Added
	"destroy" signal.

	* bonobo/bonobo-ui-container.c
	(bonobo_ui_container_set_engine): Connect to the engine's
	"destroy" signal.

2001-07-22  Martin Baulig  <baulig@suse.de>

	* bonobo/bonobo-ui-xml.c (bonobo_ui_xml_strip): Removed.
	(bonobo_ui_xml_merge): Don't call bonobo_ui_xml_strip.

2001-07-22  Mike Kestner  <mkestner@speakeasy.net>

	* configure.in : produce the samples Makefiles.
	* libbonoboui.h : kill the removed header files.
	* bonobo/Makefile.am : remove the cs, view, vframe, and embed files.
	* bonobo/bonobo-embeddable.[ch]:
	* bonobo/bonobo-client-site.[ch]:
	* bonobo/bonobo-view.[ch]:
	* bonobo/bonobo-view-frame.[ch]:
		killed.

	* bonobo/bonobo-canvas-item.c : switch from embeddable prop to a
	CanvasComponentFactory property.
	* bonobo/bonobo-widget.c : removed the subdoc functions.
	* samples/Makefile.am : activate the compound-doc build
	* samples/compound-doc/Makefile.am : activate container build

2001-07-22  Joe Shaw  <joe@ximian.com>

	* bonobo/bonobo-ui-sync-status.c (bonobo_ui_sync_status_new): Use
	the GObject signal functions since BonoboUIEngine is a GObject now.

2001-07-21  Dan Damian  <dand@dnttm.ro>

	* libbonoboui.h: changed reference from bonobo-win.h
	to bonobo-window.h

	* bonobo/bonobo-window.h: ditto.
	
2001-07-20  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-ui-engine.c (PARENT_TYPE): make it inherit
	from a GObject since the structures do: doh.

	* bonobo/bonobo-window.c (destroy_priv): g_object_unref
	the BonoboUIEngine, not gtk_object_unref.

	* bonobo/bonobo-ui-toolbar-item.c (impl_destroy): protect
	against double destroys - these seem to happen; argh.

	* bonobo/bonobo-canvas-component.c (rih_destroy): ditto.

	* bonobo/bonobo-wrapper.c (bonobo_wrapper_destroy): ditto.

	* bonobo/bonobo-ui-toolbar-button-item.c (impl_destroy): ditto.

2001-07-19  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-ui-node.c (bonobo_ui_node_strip): NULL
	all the node's parents: they are now orphand.

	* bonobo/bonobo-ui-engine.c (bonobo_ui_engine_xml_merge_tree):
	remove redundant strip.

	* bonobo/bonobo-ui-util.c (lookup_stock_compat): impl.
	(bonobo_ui_util_xml_get_icon_widget): obfuscate stock
	code to provide reasonable backwards compat, show the
	widget we return.

	* tests/test-ui.c (main): upd.

	* bonobo/bonobo-ui-util.c (bonobo_ui_util_new_menu),
	(bonobo_ui_util_new_placeholder),
	(bonobo_ui_util_set_radiogroup),
	(bonobo_ui_util_set_toggle),
	(bonobo_ui_util_new_std_toolbar): 
	(bonobo_ui_util_new_toggle_toolbar),
	(bonobo_ui_util_xml_set_pix_fname),
	(bonobo_ui_util_xml_set_pix_stock),
	(bonobo_ui_util_xml_set_pix_xpm),
	(bonobo_ui_util_build_accel): kill.

	* changes.txt: upd.

2001-07-19  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-ui-toolbar-button-item.c: upd.

	* bonobo/Makefile.am: remove bonobo-ui-toolbar-icon.[ch]

	* bonobo/bonobo-ui-toolbar-icon.[ch]: remove.

	* bonobo/bonobo-ui-sync-menu.c (impl_bonobo_ui_sync_menu_build): upd.

2001-07-19  Michael Meeks  <michael@ximian.com>

	* tests/test-ui.c (main): hack out test encode / decode.

	* bonobo/bonobo-ui-sync-toolbar.c (do_config_popup): simplify.

	* bonobo/bonobo-ui-sync-menu.c (impl_bonobo_ui_sync_menu_build): ditto.

	* bonobo/bonobo-ui-component.c (bonobo_ui_component_get_prop): 
	simplify removing decode.
	(bonobo_ui_component_set_prop): simplify removing encode.
	(bonobo_ui_component_set_status): ditto.

	* bonobo/bonobo-ui-sync-toolbar.c (impl_bonobo_ui_sync_toolbar_state): ditto.

	* bonobo/bonobo-ui-sync-toolbar.c (impl_bonobo_ui_sync_toolbar_state): ditto.

	* bonobo/bonobo-ui-sync-status.c (impl_bonobo_ui_sync_status_state): ditto.

	* bonobo/bonobo-ui-sync-menu.c (put_hint_in_statusbar): ditto.

	* bonobo/bonobo-ui-sync-menu.c (impl_bonobo_ui_sync_menu_state): ditto.

	* bonobo/bonobo-ui-config-widget.c (populate_list): ditto.

	* bonobo/bonobo-selector-widget.c (get_lang_list): 
	cut and paste from Nautilus - ug.
	(free_lang_list): impl.
	(get_filtered_objects): internationalize properly & simplify.

	* bonobo/bonobo-ui-util.c (bonobo_ui_util_decode_str),
	(bonobo_ui_util_encode_str): kill.

	* bonobo/bonobo-ui-util.h (bonobo_ui_util_encode_str),
	(bonobo_ui_util_encode_str): turn into g_strdup aliases - now
	libxml2 can cope with utf-8 fine.

2001-07-19  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-selector.c (bonobo_selector_construct):
	connect the "response" not "clicked" signal on GtkDialog.
	s/button_callback/response/callback/, don't listen on "close"
	(response_callback): upd.
	use bonobo_main_quit.
	(cancel_callback): remove: redundant.
	(ok_callback): upd.
	(bonobo_selector_select_id): upd & handle dialog_run correctly.

	* tests/test-selector.c (main): hack out loads of cruft,
	simplify to a single function.

2001-07-19  Anders Carlsson  <andersca@gnome.org>

	* tests/test-selector.c: Change include of bonobo-win.h
	to bonobo-window.h

	* tests/test-ui.c: Change include of bonobo-win.h to 
	bonobo-window.h

	* bonobo/bonobo-win.c: Remove file.
	
	* bonobo/bonobo-win.h: Remove file.

	* bonobo/bonobo-ui-xml.c (bonobo_ui_xml_set_dirty): Change
	reference to bonobo-window.c

	* bonobo/Makefile.am (libbonoboinclude_HEADERS): Change
	bonobo-win.h to bonobo-window.h
	(libbonoboui_2_la_SOURCES): Change bonobo-win.c to
	bonobo-window.c

	* changes.txt: Add change about bonobo-window.[ch]

2001-07-19  Martin Baulig  <baulig@suse.de>

	* bonobo/bonobo-ui-sync-menu.c, bonobo/bonobo-ui-sync-toolbar.c:
	Added "stockid=`stockid'" attribute to the XML node which you can
	use to get GtkStock items.

	* bonobo/bonobo-ui-util.c (bonobo_ui_util_xml_get_icon_pixmap_widget):
	Made second argument of this function a GtkIconSize.

2001-07-18  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-selector-widget.c (server_list_compare): kill.
	(get_filtered_objects): impl.
	(build_id_query_fragment): impl. - essentialy use oaf directly,
	thus removing bonobo_directory_* permanantly.

	* tests/Makefile.am: rename selector_test to conform to the
	grand plan.

2001-07-19  Martin Baulig  <baulig@suse.de>

	* bonobo/bonobo-ui-engine.[ch]: Ported to GObject.
	* bonobo/bonobo-ui-xml.[ch]: Ported to GObject.

2001-07-17  Michael Meeks  <michael@ximian.com>

	* bonobo/Makefile.am (libbonoboinclude_HEADERS): remove
	bonobo-ui-compat.h: extremely stale.

2001-07-17  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-ui-sync-status.c
	(impl_bonobo_ui_sync_status_build): don't have a 'resize
	grip' on the statusbar.

	* bonobo/bonobo-ui-component.c (impl_get_prop):
	free the string.

	* bonobo/bonobo-ui-toolbar.c (impl_destroy): cope with
	a NULL priv->popup_item.
	(impl_remove): don't do a typechecked cast -
	popup_item can be NULL.
	(impl_destroy): check before unref.

	* bonobo/bonobo-wrapper.c (bonobo_wrapper_draw): kill.

	* bonobo/bonobo-ui-toolbar.c (impl_draw): kill.

	* bonobo/bonobo-ui-component.c
	(bonobo_ui_component_new_default): make default name
	just getpid () + static idx.

	* bonobo/bonobo-ui-toolbar-separator-item.c
	(impl_expose_event): move the draw impl. here.
	(impl_draw): kill.

	* bonobo/bonobo-ui-toolbar.c (impl_expose_event): return
	TRUE from expose.

	* libbonoboui.h: include bonobo-ui-main.h

	* tests/test-reparent.c (main): do a bonobo_ui_init.

2001-07-12  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-ui-toolbar.c (impl_expose_event): port to
	Gtk+ 2.0

2001-07-13  Darin Adler  <darin@bentspoon.com>

	* configure.in: Remove duplicate macros.
	* doc/.cvsignore: Ignore some generated files.

2001-07-12  Murray Cumming <murrayc@usa.net>

	* doc directory: Added some files from the original bonobo module,
	which deal with UI stuff. Maybe others should go in too, but
	I don't know whether the component stuff is in libbonobo or
	libbonoboui.
	
2001-07-12  Martin Baulig  <baulig@suse.de>

	* bonobo/bonobo-ui-engine.c: Fix signal marshaller for EMIT_EVENT_ON.

	* bonobo/bonobo-ui-component.c: Fix signal marshaller for UI_EVENT.

2001-07-05  Tim Mooney <mooney@dogbert.cc.ndsu.NoDak.edu>

	* bonobo/bonobo-view.c: add a placeholder member to _BonoboViewPrivate
	struct, since most compilers object to empty structs.

2001-07-07  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-ui-container.c (bonobo_ui_container_set_engine):
	port to GObject.

	* bonobo/bonobo-ui-main.c (bonobo_ui_init_full):
	always init gtk+, leave gnome_ bits as optional on full_init.

	* bonobo/bonobo-win.c (bonobo_window_construct): add
	ui container bits. (bonobo_window_new): ditto.
	(bonobo_window_get_ui_container): impl.
	(bonobo_window_set_ui_container): remove.

	* bonobo/bonobo-ui-engine-config.c (create_popup_engine):
	set view to NULL.

2001-07-06  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-ui-engine.c
	(bonobo_ui_engine_get_view): impl.
	(bonobo_ui_engine_new, bonobo_ui_engine_construct): upd,
	adding view.
	(bonobo_ui_engine_get_ui_container): impl. for symmetry.
	(bonobo_ui_engine_set_ui_container): upd. preconditions.

	* bonobo/bonobo-win.c (construct_priv): set the view.

	* bonobo/bonobo-ui-container.c
	(bonobo_ui_container_set_win),
	(bonobo_ui_container_get_win): remove; deprecated. 
	upd.

	* bonobo/bonobo-win.c
	(bonobo_window_deregister_dead_components),
	(bonobo_window_register_component),
	(bonobo_window_deregister_component),
	(bonobo_window_deregister_component_by_ref),
	(bonobo_window_deregister_get_component_names),
	(bonobo_window_component_get),
	(bonobo_window_xml_node_exists), 
	(bonobo_window_object_set), 
	(bonobo_window_object_get), 
	(bonobo_window_xml_merge_tree), 
	(bonobo_window_xml_merge), 
	(bonobo_window_xml_rm), 
	(bonobo_window_freeze), 
	(bonobo_window_thaw), 
	(bonobo_window_xml_get),
	(bonobo_window_dump), 
	(bonobo_window_set_ui_container):  remove a few deprecated
	methods NB. use the equivalents on the BonoboUIEngine.

	* bonobo/bonobo-win.h: kill from header too.

	* tests/test-ui.c (main): don't call bonobo_ui_init - it get's
	libgnome to do seriously whacked out things.

2001-07-06  Christian Rose  <menthos@menthos.com>

	* configure.in: Added sv to ALL_LINGUAS.

2001-07-02  Carlos Perelló Marín <carlos@gnome-db.org>

	* bonobo/bonobo-canvas-component.c, bonobo/bonobo-control.c,
	bonobo/bonobo-control-frame.c, bonobo/bonobo-embeddable.c,
	bonobo/bonobo-ui-component.c, bonobo/bonobo-view.c:
	/s/g_signal_newc/g_signal_new/ to sync with the latest glib.

2001-06-29  Anders Carlsson  <andersca@codefactory.se>

	* bonobo/bonobo-ui-component.c (impl_get_prop): Use CORBA_free
	since bonobo_ui_component_get returns a CORBA_char.

Sat Jun 30 16:11:37 2001  Jonathan Blandford  <jrb@redhat.com>

	* bonobo/bonobo-embeddable.c (make_canvas_component): change
	g_signal_connect_data arguments to match new signature
	(impl_Bonobo_Embeddable_createView): ditto

	* bonobo/bonobo-ui-engine.c (bonobo_ui_engine_set_ui_container):
	ditto.

2001-06-28  Michael Meeks  <michael@ximian.com>

	* bonobo/*.h: update for new gmacros location, requires HEAD
	glib.

	* *.c: include string.h where neccessary, update includes,
	misc warning fixes.

2001-06-26  Darin Adler  <darin@bentspoon.com>

        * bonobo/bonobo-win.c: (construct_priv): Don't connect
        a signal handler.
        (bonobo_window_key_press_event): Use a default handler, and call
        the inherited one first. This gives the focused widget first
        crack at the event, and prevents us from having two things that
        both handle the same event.
        (bonobo_window_class_init): Point to the default handler.

2001-06-21  Mike Kestner <mkestner@speakeasy.net>

	* bonobo/bonobo-ui-node.c (do_strip): Move XML_TEXT_NODE to the
	"suspicious" branch so whitespace nodes are stripped from the tree.

2001-06-19  Héctor García Álvarez <hector@scouts-es.org>

	* configure.in: added "es" for Spanish to $ALL_LINGUAS

2001-06-15  Dietmar Maurer  <dietmar@ximian.com>

	* bonobo/bonobo-view.c: added something to the empty structure to
	stop compiler warnings on solaris.

	* bonobo/bonobo-ui-sync.c (bonobo_ui_sync_state): return void
	(bonobo_ui_sync_state_placeholder): return void

2001-06-13  Stanislav Visnovsky  <visnovsky@nenya.ms.mff.cuni.cz>

	* configure.in: Added "sk" for Slovak to $ALL_LINGUAS

2001-06-10  Martin Baulig  <baulig@suse.de>

	* bonobo/bonobo-ui-engine-config.c: #ifdef FIXME all gnome-config calls.

Sun Jun 10 01:27:57 2001  Malcolm Tredinnick <malcolm@commsecure.com.au>

	* bonobo/bonobo-control.c (impl_Bonobo_Control_focus): altered a
	  gtk_container_focus() call to be a gtk_widget_child_focus() call
	  (matching a recent gtk+ change).

2001-06-07  Pablo Saratxaga  <pablo@mandrakesoft.com>

	* configure.in: Added "az", "wa" and Norwegian to $ALL_LINGUAS

2001-06-01  Joe Shaw  <joe@ximian.com>

	* bonobo/bonobo-canvas-component.c: Added 
	_bonobo_boolean_handled_accumulator(), ripped from gtk+/gtk/gtkmain.c.

2001-05-31  Joe Shaw  <joe@ximian.com>

	* bonobo/bonobo-canvas-component.c: GObjectify. Change calls to
	GNOME_CANVAS_ITEM_CLASS() to GNOME_CANVAS_ITEM_GET_CLASS(). Make
	gcc_destroy() gcc_finalize().

	* bonobo/bonobo-embeddable.c: GObjectify. Change
	bonobo_embeddable_destroy() to bonobo_embeddable_finalize()

	* bonobo/bonobo-view.c: GObjectify. Delete
	gnome_marshal_NONE__DOUBLE.

2001-05-30  Dietmar Maurer  <dietmar@ximian.com>

	* bonobo/bonobo-control.c (bonobo_control_set_properties): pass a
	Bonobo_PropertyBag instead of a BonoboPropertyBag
	(bonobo_control_get_properties): return a Bonobo_PropertyBag

2001-05-30  Johan Dahlin  <zilch.am@home.se>

	* bonobo/bonobo-ui-toolbar-item.h: Removed duplicate prototypes.
	
2001-05-30  Christophe Merlet  <redfox@eikonex.org>

	* configure.in: Added fr to $ALL_LINGUAS

2001-05-25  Joe Shaw  <joe@ximian.com>

	* bonobo/bonobo-ui-engine-config.c (dialog_new),
	bonobo/bonobo-selector.c (bonobo_selector_construct):
	GTK_STOCK_BUTTON_OK -> GTK_STOCK_OK

2001-05-19  Martin Baulig  <baulig@suse.de>

	* bonobo/bonobo-plug.[ch]: Derive from GtkPlug.
	* bonobo/bonobo-socket.[ch]: Derive from GtkSocket.

	* bonobo/bonobo-control.c (process_events): Use g_main_context_pending()
	and g_main_context_iteration() instead of gtk_events_pending() and
	gtk_main_iteration().

2001-05-06  Martin Baulig  <baulig@suse.de>

	* bonobo/bonobo-ui-toolbar-control-item.c
	(set_control_property_bag_value): Use the new bonobo_pbclient_set_value().

2001-05-02  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-embeddable.c (impl_Bonobo_Embeddable_advise),
	(impl_Bonobo_Embeddable_unadvise): kill.
	(bonobo_embeddable_class_init): upd.

	* changes.txt: add to document changes

	* bonobo/Makefile.am: remove bonobo-desktop.[ch]

	* bonobo/bonobo-desktop.[ch]: remove.

2001-05-02  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-widget.c (bonobo_widget_launch_component),
	(bonobo_widget_get_objref): kill BonoboObjectClient

	* bonobo/bonobo-client-site.c (bonobo_client_site_bind_embeddable),
	(bonobo_client_site_get_embeddable): kill BonoboObjectClient.

2001-05-01  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-ui-component.c (bonobo_ui_component_set_container),
	(bonobo_ui_component_unset_container, impl_set_prop),
	(bonobo_ui_component_add_verb_list_with_data):  kill theoretical
	re-enterancy issues.

2001-05-01  Martin Baulig  <baulig@suse.de>

	* bonobo/bonobo-control.[ch]: Use GObject, not GtkObject.
	* bonobo/bonobo-control-frame.[ch]: Likewise.
	* bonobo/bonobo-ui-component.[ch]: Likewise.
	* bonobo/bonobo-ui-container.[ch]: Likewise.

	* bonobo/bonobo-ui-engine.c (impl_destroy): Removed and put
	all the stuff into finalize; `destroy' may be run multiple
	times with GTK+ 2.0, so it's easier to have this in finalize.

	* bonobo/bonobo-widget.c (bonobo_widget_destroy): Renamed to
	bonobo_widget_finalize(), we use `finalize' since `destroy'
	may be run multiple times.

2001-05-01  Martin Baulig  <baulig@suse.de>

	* bonobo/Makefile.am: Install all our header files.

2001-05-01  Martin Baulig  <baulig@suse.de>

	* libbonoboui.h: Don't #include bonobo-print.h and
	bonobo-print-client.h for the moment.

2001-05-01  Martin Baulig  <baulig@suse.de>

	* bonobo/bonobo-win.c (construct_priv): #ifdef FIXME call
	to gtk_menu_bar_set_shadow_type().

2001-05-01  Martin Baulig  <baulig@suse.de>

	* bonobo/bonobo-selector-widget.c: #include
	<libgnome/gnome-preferences.h> instead of
	<libgnomeui/gnome-uidefs.h>.
	* bonobo/bonobo-ui-sync-static.c: Likewise.

	* bonobo/bonobo-ui-sync-menu.c: #include
	<libgnome/gnome-preferences.h> instead of
	<libgnomeui/gnome-preferences.h>.
	* bonobo/bonobo-ui-sync-toolbar.c: Likewise.
	* bonobo/bonobo-win.c: Likewise.

	* bonobo/bonobo-ui-sync-menu.h: #include <gtk/gtkmenubar.h>.

2001-05-01  Martin Baulig  <baulig@suse.de>

	* bonobo/bonobo-ui-main.[ch]: New files.
	(bonobo_ui_init, bonobo_ui_init_full): New functions to
	initialize libbonoboui.
	(bonobo_setup_x_error_handler): Moved here from libbonobo.

2001-05-01  Martin Baulig  <baulig@suse.de>

	* tests/*.c: Make the tests actually work.

	* Makefile.am (SUBDIRS): Added tests/.

2001-05-01  Martin Baulig  <baulig@suse.de>

	* bonobo/libbonoboui-2.0.pc.in: Make this actually work.

2001-04-25  Martin Baulig  <baulig@suse.de>

	* bonobo/bonobo-dock.[ch], bonobo/bonobo-dock-item.[ch],
	bonobo/bonobo-dock-band.[ch], bonobo/bonobo-dock-layout.[ch]:
	Moved here from libgnomeui/libgnomeui/gnome-dock*.[ch] and
	renamed from GnomeDock -> BonoboDock.

	* bonobo/bonobo-ui-sync-toolbar.[ch], bonobo/bonobo-win.c:
	s/GnomeDock/BonoboDock/g; s/gnome_dock/bonobo_dock/g;.

2001-04-24  Martin Baulig  <baulig@suse.de>

	* bonobo/bonobo-ui-sync-menu.c (impl_bonobo_ui_sync_menu_state):
	Use GtkImageMenuItem instead of GtkPixmapMenuItem.
	(impl_bonobo_ui_sync_menu_state): Comment out accelerator stuff.

	* bonobo/bonobo-ui-sync-toolbar.c
	(cmd_get_toolbar_pixbuf): Renamed to cmd_get_toolbar_image() and let
	it return a GtkWidget.

	* bonobo/bonobo-ui-toolbar-button-item.c
	(create_pixmap_widget_from_pixbuf): Removed.
	(set_icon): Renamed to set_image() and let it return a GtkWidget.

	* bonobo/bonobo-ui-toolbar-button-item.h
	(bonobo_ui_toolbar_button_item_set_icon): Renamed to
	bonobo_ui_toolbar_button_set_image() and changed argument from
	GdkPixbuf to GtkWidget.
	(BonoboUIToolbarButtonItemClass): Changed argument of `set_icon'
	from GdkPixbuf to GtkWidget.

	* bonobo/bonobo-ui-util.c (get_stock_pixbuf): Removed.
	(bonobo_ui_util_xml_get_icon_pixbuf): Removed.
	(bonobo_ui_util_xml_get_icon_pixmap_widget): Move functionality
	from bonobo_ui_util_xml_get_icon_pixbuf() and use the GtkStock
	system.

2001-04-24  Martin Baulig  <baulig@suse.de>

	* configure.in: Depend on libgnome.

	* bonobo/Makefile.am (INCLUDES): Added BONOBO_UIDIR.

	* bonobo/bonobo-ui-util.c
	(convert_from_chromakey, pixbuf_from_imlib): Removed.
	(get_stock_pixbuf): Use find_pixmap_in_path() instead of
	gnome_pixmap_file().
	(find_pixmap_in_path): Use gnome_program_locate_file() to
	locate the pixmap file instead of our own parser.
	(bonobo_ui_util_xml_get_icon_pixmap_widget): Create and
	return a GtkImage instead of a GnomePixmap.
	(bonobo_ui_util_build_help_menu): `#ifdef FIXME' this.
	
2001-04-24  Martin Baulig  <baulig@suse.de>

	* bonobo/bonobo-insert-component.xpm: constify this.

	* bonobo/bonobo-selector-widget.c (bonobo_selector_widget_init):
	use GdkPixbuf/GtkImage instead of GnomePixmap.

2001-04-24  Martin Baulig  <baulig@suse.de>

	* bonobo/bonobo-selector.[ch]: Use GtkDialog, not GnomeDialog.

	* bonobo/bonobo-ui-engine-config.c (dialog_new): Use GtkDialog,
	not GnomeDialog.

2001-04-24  Martin Baulig  <baulig@suse.de>

	* bonobo/bonobo-zoomable.h (BonoboZoomableClass):
	Added `POA_Bonobo_Zoomable__epv epv'.
	(bonobo_zoomable_get_epv): Removed.
	(bonobo_zoomable_corba_object_create): Removed.
	(bonobo_zoomable_construct): Removed.

	* bonobo/bonobo-zoomable-frame.h (BonoboZoomableFrameClass):
	Added `POA_Bonobo_ZoomableFrame__epv epv'.
	(bonobo_zoomable_frame_get_epv): Removed.
	(bonobo_zoomable_frame_corba_object_create): Removed.
	(bonobo_zoomable_frame_construct): Removed.

	* bonobo/bonobo-zoomable.c, bonobo/bonobo-zoomable-frame.c:
	Use the new BonoboObject API (the code which was formerly known
	as BonoboXObject).

2001-04-24  Martin Baulig  <baulig@suse.de>

	* bonobo/*.c: Did the basic GTK+ 2.0 porting work, but without
	any real code changes.

2001-04-24  Martin Baulig  <baulig@suse.de>

	* bonobo/Makefile.am (INCLUDES, libbonoboui_la_LIBADD):
	Use the correct CFLAGS and LIBS to make this actually work.
	(libbonoboui_la_SOURCES): Removed bonobo-item-container.c and
	bonobo-property-bag-xml.c.

	* bonobo/bonobo-insert-component.xpm: Moved this here from the
	staging directory.
	
2001-04-19  Michael Meeks  <michael@ximian.com>

	* *.[ch]:
	s/bonobo-xobject/bonobo-object/g;
	s/BonoboXObject/BonoboObject/g;
	s/bonobo_x_object/bonobo_object/g;
	s/BONOBO_X_/BONOBO_/g;
	s/<libgnomebase\/gnome-defs.h>/<gmacros.h>/;
	s/BEGIN_GNOME_DECLS/G_BEGIN_DECLS/g;
	s/END_GNOME_DECLS/G_END_DECLS/g;
	
2001-04-19  Michael Meeks  <michael@ximian.com>

	* bonobo/Makefile.am: add.

	* bonobo/libbonoboui-2.0.pc.in: add.

2001-04-18  Michael Meeks  <michael@ximian.com>

	* tests/Makefile.am: upd.

2001-04-18  Michael Meeks  <michael@ximian.com>

	* bonobo.h: add.

	* libbonoboui.h: add

